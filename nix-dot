#!/bin/sh

if [ $1 = "up" ] 
then
    echo "Uploading nix/dotfiles to Github..."
    pushd ~/doc/nix-dot/
    cp -r ~/.config/nixpkgs .
    cp -r /etc/nixos/ .
    cp -r ~/.config/herbstluftwm ./config/
    cp -r ~/.config/polybar ./config/
    cp -r ~/.xinitrc ./dot/xinitrc
    cp -r ~/.emacs.d/init.el ./dot/emacs.d/
    cp -r ~/.emacs.d/emacs.org ./dot/emacs.d/
    cp -r ~/.xmodmap/ ./dot/xmodmap
    
    git add .
    git commit -m "Used nix-dot script to update repo."
    git push
    popd

    

    echo "Finished uploading to Github!"
fi

if [ $1 = "down" ]
then
    echo "Downloading and copying nix/dotfiles to respective locations..."

    cp -r nixpkgs ~/.config/nixpkgs
    cp -r ./config/ ~/.config/herbstluftwm
    cp -r ./config/ ~/.config/polybar 
    cp -r ./dot/xinitrc ~/.xinitrc
    mkdir ~/.emacs.d/
    cp -r ./dot/emacs.d/init.el ~/.emacs.d/ 
    cp -r ./dot/emacs.d/emacs.org ~/.emacs.d/
    cp -r ./dot/xmodmap/ ~/.xmodmap
    su -c "cp -r ./nixos /etc/"

    echo "All finished!"
    echo ""
    echo "Remember to run:"
    echo "# nixos-rebuild switch"
    echo "$ home-manager switch"
fi 
